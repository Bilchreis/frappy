[node ccr12]
description = [sim] CCR12 box of MLZ Sample environment group
	.
	Contains a Lakeshore 336 and an PLC controlling the compressor
	and some valves.
	.
	This is how we use it now.

.meaning={'T_regulation':{'T_ccr12':200, 'T_ccr12_stick':150, 'T_ccr12_tube':100}, 'T_sample':{'T_ccr12_B':100, 'T_ccr12_A':90, 'T_ccr12_D':20, 'T_ccr12_C':10}}

[interface tcp]
type=tcp
bindto=0.0.0.0
bindport=10767

[module T_ccr12]
class=secop.simulation.SimDrivable
.description=Main temperature control node of CCR12.
	.
	Switches between regulation on stick and regulation on tube depending on temperature requested.
	May also pump gas for higher temperatures, if configured.
.extra_params=ramp
ramp.datatype=["double",0,600]
ramp.default=60
value.unit='K'
value.default=300
target.datatype=["double", 0, 600]
target.default=300
target.unit='K'

[module T_ccr12_stick]
class=secop.simulation.SimDrivable
.description=Temperature regulation for the sample stick in ccr12.
.extra_params=ramp
target.datatype=["double", 0, 600]
ramp.datatype=["double",0,600]
ramp.default=60
value.unit='K'
value.default=300
target.default=300

[module T_ccr12_tube]
class=secop.simulation.SimDrivable
.description=Temperature regulation for the tube of ccr12.
.extra_params=ramp
target.datatype=["double", 0, 300]
ramp.datatype=["double",0,600]
ramp.default=60
value.unit='K'
value.default=300
target.default=300

[module T_ccr12_A]
class=secop.simulation.SimReadable
.description=(optional) Sample temperature sensor.
value.default=300
value.unit='K'

[module T_ccr12_B]
class=secop.simulation.SimReadable
.description=(regulation) temperature sensor on stick.
value.default=300
value.unit='K'

[module T_ccr12_C]
class=secop.simulation.SimReadable
.description=Temperature at the coldhead.
value.default=70
value.unit='K'

[module T_ccr12_D]
class=secop.simulation.SimReadable
.description=(regulation) temperature at coupling to stick.
value.default=80
value.unit='K'



[module ccr12_pressure_regulate]
class=secop.simulation.SimWritable
.description=Selects on which Sensor the pressure regulation works, or switches it off.
.visibility=expert
value.default='off'
value.datatype=["enum", {'off':0,'p1':1,'p2':2}]
target.datatype=["enum", {'off':0,'p1':1,'p2':2}]

[module ccr12_compressor]
class=secop.simulation.SimDrivable
.description=Switches the compressor for the cooling stage on or off.
	.
	Note: This should always be on, except for fast heatup for sample change.
value.default='off'
value.datatype=["enum", {'off':0,'on':1}]
target.datatype=["enum", {'off':0,'on':1}]

[module ccr12_gas_switch]
class=secop.simulation.SimWritable
.description=Switches the gas inlet on or off.
value.default='off'
value.datatype=["enum", {'off':0,'on':1}]
target.datatype=["enum", {'off':0,'on':1}]

[module ccr12_vacuum_switch]
class=secop.simulation.SimWritable
.description=Switches the vacuum pumping valve on or off.
value.default='off'
value.datatype=["enum", {'off':0,'on':1}]
target.datatype=["enum", {'off':0,'on':1}]

[module ccr12_p1]
class=secop.simulation.SimReadable
.description=Default pressure Sensor, linear scale 0..1000mbar
value.default=999
value.unit=mbar

[module ccr12_p2]
class=secop.simulation.SimReadable
.description=Auxillary pressure Sensor.
value.default=1e-6
value.unit=mbar

[module ccr12_curve_p2]
class=secop.simulation.SimWritable
.description=Curve for Aux pressure Sensor p2
.visibility=expert
value.default='TTR100'
value.datatype=["enum", {'10V':0,'default':1,'9V':2,'DI200':3,'DI2000':4,'TTR100':7,'PTR90':8,'PTR225/PTR237':9,'ITR90':10,'ITR100 curve D':11, 'ITR100 curve 2':12, 'ITR100 curve 3':13,'ITR100 curve 4':14,'ITR100 curve 5':15, 'ITR100 curve 6':16, 'ITR100 curve 7':17, 'ITR100 curve 8':18, 'ITR100 curve 9':19, 'ITR100 curve A':20,'CMR361':21, 'CMR362':22, 'CMR363':23, 'CMR364':24, 'CMR365':25}]
target.datatype=["enum", {'10V':0,'default':1,'9V':2,'DI200':3,'DI2000':4,'TTR100':7,'PTR90':8,'PTR225/PTR237':9,'ITR90':10,'ITR100 curve D':11, 'ITR100 curve 2':12, 'ITR100 curve 3':13,'ITR100 curve 4':14,'ITR100 curve 5':15, 'ITR100 curve 6':16, 'ITR100 curve 7':17, 'ITR100 curve 8':18, 'ITR100 curve 9':19, 'ITR100 curve A':20,'CMR361':21, 'CMR362':22, 'CMR363':23, 'CMR364':24, 'CMR365':25}]

[module ccr12_p1_limits]
class=secop.simulation.SimWritable
.description=Limits for pressure regulation in P1.
.visibility=expert
value.datatype=["tuple",[["double"],["double"]]]
value.default=[0,10]
value.unit=mbar
target.datatype=["tuple",[["double"],["double"]]]
target.default=[0,10]
target.unit=mbar

[module ccr12_p2_limits]
class=secop.simulation.SimWritable
.description=Limits for pressure regulation in P2.
.visibility=expert
value.datatype=["tuple",[["double"],["double"]]]
value.default=[1e-5,1e-3]
value.unit=mbar
target.datatype=["tuple",[["double"],["double"]]]
target.default=[1e-5,1e-3]
target.unit=mbar
